<!doctype html><html lang=vi dir=auto><head><meta charset=utf-8><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","h1brvbjch9")</script><link rel=manifest href=/manifest.json><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>0x05 - Create An Extract-Zip-File Project | Code Cho Vui</title><meta name=keywords content="Rust"><meta name=description content="Qua các bài viết về concept cơ bản trong Rust trước đó. Hôm nay mình sẽ làm 1 tool giải nén file zip bằng thư viện zip trong Rust.
Cách sử dụng tool này khá đơn giản, chỉ cần nhập dòng lệnh sau
cargo run <file_name> Ok, bắt đầu thôi nào.
Tạo project với Cargo Sử dụng cargo new để tạo 1 project mới
cargo new extract-zip-file Mình sẽ có cấu trúc thư mục cơ bản như sau:"><meta name=author content="Kaiz, Hung Phu"><link rel=canonical href=/blog/rust/0x05/><link crossorigin=anonymous href=/assets/css/stylesheet.min.d16cfb38f64514c1ffc4e44f1933c554444b659c78af43300b4613abd4c62bce.css integrity="sha256-0Wz7OPZFFMH/xORPGTPFVERLZZx4r0MwC0YTq9TGK84=" rel="preload stylesheet" as=style><link rel=preload href=/img/icon.png as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script> <link rel=icon href=/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon.ico><link rel=apple-touch-icon href=/favicon.ico><link rel=mask-icon href=/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.115.3"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-KJ7E8KPYTM"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-KJ7E8KPYTM",{anonymize_ip:!1})}</script><meta property="og:title" content="0x05 - Create An Extract-Zip-File Project"><meta property="og:description" content="Qua các bài viết về concept cơ bản trong Rust trước đó. Hôm nay mình sẽ làm 1 tool giải nén file zip bằng thư viện zip trong Rust.
Cách sử dụng tool này khá đơn giản, chỉ cần nhập dòng lệnh sau
cargo run <file_name> Ok, bắt đầu thôi nào.
Tạo project với Cargo Sử dụng cargo new để tạo 1 project mới
cargo new extract-zip-file Mình sẽ có cấu trúc thư mục cơ bản như sau:"><meta property="og:type" content="article"><meta property="og:url" content="/blog/rust/0x05/"><meta property="og:image" content="/img/icon.png"><meta property="article:section" content="blog"><meta property="article:published_time" content="2023-03-27T12:48:19+07:00"><meta property="article:modified_time" content="2023-03-27T12:48:19+07:00"><meta property="og:site_name" content="Mục Lục"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/img/icon.png"><meta name=twitter:title content="0x05 - Create An Extract-Zip-File Project"><meta name=twitter:description content="Qua các bài viết về concept cơ bản trong Rust trước đó. Hôm nay mình sẽ làm 1 tool giải nén file zip bằng thư viện zip trong Rust.
Cách sử dụng tool này khá đơn giản, chỉ cần nhập dòng lệnh sau
cargo run <file_name> Ok, bắt đầu thôi nào.
Tạo project với Cargo Sử dụng cargo new để tạo 1 project mới
cargo new extract-zip-file Mình sẽ có cấu trúc thư mục cơ bản như sau:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Blog","item":"/blog/"},{"@type":"ListItem","position":3,"name":"📁 Rust","item":"/blog/rust/"},{"@type":"ListItem","position":4,"name":"0x05 - Create An Extract-Zip-File Project","item":"/blog/rust/0x05/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"0x05 - Create An Extract-Zip-File Project","name":"0x05 - Create An Extract-Zip-File Project","description":"Qua các bài viết về concept cơ bản trong Rust trước đó. Hôm nay mình sẽ làm 1 tool giải nén file zip bằng thư viện zip trong Rust.\nCách sử dụng tool này khá đơn giản, chỉ cần nhập dòng lệnh sau\ncargo run \u0026lt;file_name\u0026gt; Ok, bắt đầu thôi nào.\nTạo project với Cargo Sử dụng cargo new để tạo 1 project mới\ncargo new extract-zip-file Mình sẽ có cấu trúc thư mục cơ bản như sau:","keywords":["Rust"],"articleBody":" Qua các bài viết về concept cơ bản trong Rust trước đó. Hôm nay mình sẽ làm 1 tool giải nén file zip bằng thư viện zip trong Rust.\nCách sử dụng tool này khá đơn giản, chỉ cần nhập dòng lệnh sau\ncargo run Ok, bắt đầu thôi nào.\nTạo project với Cargo Sử dụng cargo new để tạo 1 project mới\ncargo new extract-zip-file Mình sẽ có cấu trúc thư mục cơ bản như sau:\nextract-zip-file/ ├── Cargo.toml ├── Cargo.lock └── src └── main.rs Trước hết mình sẽ install thư viện zip vào bên trong project.\nVào bên trong file Cargo.toml, thêm thư viện như sau:\n[package] //... [dependencies] zip = \"0.6.4\" Ngay sau khi thêm đoạn zip=... vào phần dependencies, project sẽ tự động install thư viện zip về.\nBắt đầu dòng code đầu tiên Đầu tiên, mình sẽ đi vào src/main.rs để khai báo thư viện\nuse std::fs; use std::io; use std::path::Path; use zip::ZipArchive; Như ở trên, mình sử dụng 4 thư viện ghi/đọc dữ liệu từ file và phục vụ việc tạo ra những file mới sau khi extract thành công.\nKế tiếp, tại hàm main mình sẽ kiểm tra đầu vào của file\nfn main() { std::process::exit(real_main()); } Tất nhiên, dòng code ở trên vẫn chưa chạy được vì mình chưa khởi tạo hàm real_main(). Sau đây mình sẽ khởi tạo hàm real_main() và thực hiện lệnh thao tác extract zip file.\nTạo hàm real_main() và kiểm tra đầu vào Bên dưới hàm main, mình tạo 1 hàm real_main để xử lý dữ liệu đầu vào\nfn real_main() -\u003e i32 { } Ở đây mình khai báo fn real_main() -\u003e i32 là do mình muốn hàm này sẽ trả về 0 hoặc 1. Vì tại hàm main, dòng lệnh std::process::exit() chỉ chạy khi đầu vào là 1 hoặc 0 tương đương với 0 là đầu vào hợp lệ và bắt đầu xử lý, nếu trả về 1, tức đầu vào không hợp lệ, và sẽ exit khỏi chương trình.\nNhư đã nói ở trên, mình phải kiểm tra đầu vào có hợp lệ hay không.\nTrước khi kiểm tra mình cần phân tích một chút về đầu vào. Câu lệnh để thực thi của mình là\ncargo run Tại đây, cargo run là lệnh thực thi project của Rust với run là đối số đầu tiên, và là đối số thứ 2. Công việc kiểm tra của mình là phải check xem đầu vào có thực sự đúng với yêu cầu hay không.\nBước đầu kiểm tra, mình sẽ tạo 1 biến args là collection bằng Vec, không định dạng kiểu dữ liệu bằng _\nlet args: Vec\u003c_\u003e = std::env::args().collect(); if args.len() \u003c 2 { println!(\"Usage: {} \", args[0]); return 1; } Lệnh if args.len() \u003c 2 để kiểm tra xem đầu vào dữ liệu có chứa file zip hay không. Nếu câu lệnh thực thi không đúng với điều kiện mong muốn để thực thi thì chương trình sẽ chạy lệnh println!(\"Usage: {} \", args[0]) để hướng dẫn người dùng nhập đúng điều kiện và sau đó trả về 1, tức là chạy lệnh exit tại hàm main, và thoát chương trình.\nTrong trường hợp điều kiện đã đúng, mình sẽ tạo 1 đường dẫn cho file được giải nén và ghi dữ liệu vào bên trong file với thư viện Path và fs\nlet fname = Path::new(\u0026*args[1]); let file = fs::File::open(\u0026fname).unwrap(); Đoạn code trên sau khi mình mở file bằng fs::File::open() thì nó trả về 1 đối tượng Result đại diện cho việc mở file thành công hoặc thất bại. Mình sử dụng phương thức .unwrap() để xử lý kết quả đấy, trong trường hợp mở file thất bại chương trình sẽ panic!() lỗi và dừng chương trình, ngược lại, sẽ tạo ra file và gán nó cho biến file sẵn sàng cho việc đọc/ghi dữ liệu.\nBắt đầu xử lý file Qua công đoạn kiểm tra, mình sẽ bắt đầu giải nén file với phương thức ZipArchive thông qua thư viện zip.\nMình sẽ khai báo 1 biến archive là mutable để chứa các file cần giải nén và tiện cho việc sửa đổi file.\n*Có thể tìm hiểu thêm về mutable và immutable nếu không hiểu.\nlet mut archive = ZipArchive::new(file).unwrap(); Cú pháp ZipArchive::new(file) giúp mình mở file nén và đọc các dữ liệu bên trong.\nKế tiếp, mình sẽ sử dụng vòng lặp (for loop) để đọc các file bên trong.\nfor i in 0..archive.len() { } Tại đây, mình sẽ cho vòng lặp chạy qua các phần tử (các file/folder bên trong file .zip) bắt đầu từ index = 0.\nBên trong vòng lặp, mình sẽ kiểm tra file có rỗng hay không, và gán nó vào 1 biến outpath.\nlet mut file = archive.by_index(i).unwrap(); let outpath = match file.enclosed_name() { Some(path) =\u003e path.to_owned(), None =\u003e continue; } Biến archive hỗ trợ phương thức .by_index(i) để truy cập vào bên trong file tại vị trí i, nó sẽ trả về Result trong đó ZipFile là thể hiện cho file bên trong biến archive.\nSau đó mình tạo file outpath bằng cú pháp match và phương thức enclosed_name() để check file có rỗng hay không. Trường hợp file không rỗng mình sẽ dùng phương thức .to_owned() để tạo 1 bản sao của biến path và gán vào biến outpath. Ngược lại, nó sẽ đi đến file tiếp theo.\nTiếp theo, mình kiểm tra xem file nén có ghi chú nào hay không, nếu có mình sẽ hiển thị ra màn hình. Vì trường hợp ghi chú này tuỳ vào mục đích của tác giả, nên đôi khi sẽ không có, mình sẽ handle nó bên trong 1 block code cụ thể.\n*Có thể tìm hiểu về scope nếu không hiểu.\n{ let comment = file.comment(); if !comment.is_empty() { println!(\"File {} comment: {}\", i, comment); } } Cuối cùng, mình sẽ xử lý ghi dữ liệu từ file nén ra 1 file mới.\nKhi giải nén, sẽ có 1 số trường hợp bên trong file .zip là file hoặc folder. Mình sẽ kiểm tra phần tử đấy có phải là folder hay không bằng cách sử dụng phương thức .ends_with(\"/\") vì các folder thường sẽ được khai báo như extra/out.txt\nif (*file.name()).ends_with('/') { } Vì biến outpath hiện tại mình đang mong muốn đầu ra là file, nên nếu là folder, thì mình cần phải tạo 1 thư mục cha của outpath để chứa các file bên trong. Bên trong if mình sẽ sử dụng phương thức .create_dir_all() để tạo thư mục cha cho outpath\nprintln!(\"File {} extracted to \\\"{}\\\"\", i, outpath.display()); fs::create_dir_all(\u0026outpath).unwrap(); Ngược lại, nếu phần tử là 1 file, thì mình sẽ đọc dữ liệu tại file nén và ghi vào 1 biến mới outfile cùng với tên file và đường dẫn đã được chỉ định trước đó.\nprintln!(\"File {} extracted to \\\"{}\\\" ({} bytes)\", i, outpath.display(), file.size()); if let Some(p) = outpath.parent() { if !p.exists() { fs::create_dir_all(\u0026p).unwrap(); } } let mut outfile = fs::File::create(\u0026outpath).unwrap(); io::copy(\u0026mut file, \u0026mut outfile).unwrap(); Sau khi mình hiển thị dữ liệu được nén ra ngoài màn hình với println!() mình kiểm tra xem folder cha của outpath có tồn tại hay không. nếu nó không tồn tại, mình sẽ tạo 1 folder mới bằng create_dir_all()\nKế tiếp, mình tạo 1 biến outfile với đường dẫn và tên file được chỉ định bằng biến outpath trước đó.\nCuối cùng, mình sử dụng phương thức copy() để ghi dữ liệu từ file nén sang outfile. Cả 2 trường hợp mình đều sử dụng unwrap() để handle khi việc tạo và đọc file sang outfile xảy ra lỗi thì chương trình sẽ panic!() lỗi và dừng chương trình.\nKhi kết thúc vòng for, mình trả về giá trị 0 để thể hiện việc project được thực thi tại hàm main.\nfn real_main() -\u003e i32 { //do extracted file 0 } Kết Như vậy, là mình đã tạo ra được 1 dự án có thể giải nén file .zip bằng thư viện zip của Rust rồi. Cùng xem lại kết quả tại đây.\nKaiz\n","wordCount":"1352","inLanguage":"vi","datePublished":"2023-03-27T12:48:19+07:00","dateModified":"2023-03-27T12:48:19+07:00","author":{"@type":"Person","name":"Kaiz, Hung Phu"},"mainEntityOfPage":{"@type":"WebPage","@id":"/blog/rust/0x05/"},"publisher":{"@type":"Organization","name":"Code Cho Vui","logo":{"@type":"ImageObject","url":"/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href accesskey=h title="Code Cho Vui (Alt + H)"><img src=/img/icon.png alt=logo aria-label=logo height=40>Code Cho Vui</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=/blog title=Blog><span>Blog</span></a></li><li><a href=/howto title=HowTo><span>HowTo</span></a></li><li><a href=/tags title=Tags><span>Tags</span></a></li><li><a href=/categories title=Categories><span>Categories</span></a></li><li><a href=/about title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href>Trang chủ</a>&nbsp;»&nbsp;<a href=/blog/>Blog</a>&nbsp;»&nbsp;<a href=/blog/rust/>📁 Rust</a></div><h1 class=post-title>0x05 - Create An Extract-Zip-File Project</h1><div class=post-meta><span title='2023-03-27 12:48:19 +0700 +0700'>Monday, March 27, 2023</span>&nbsp;·&nbsp;7 phút&nbsp;·&nbsp;Kaiz, Hung Phu</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Mục lục</span></summary><div class=inner><ul><li><a href=#t%e1%ba%a1o-project-v%e1%bb%9bi-cargo aria-label="Tạo project với Cargo">Tạo project với Cargo</a></li><li><a href=#b%e1%ba%aft-%c4%91%e1%ba%a7u-d%c3%b2ng-code-%c4%91%e1%ba%a7u-ti%c3%aan aria-label="Bắt đầu dòng code đầu tiên">Bắt đầu dòng code đầu tiên</a></li><li><a href=#t%e1%ba%a1o-h%c3%a0m-real_main-v%c3%a0-ki%e1%bb%83m-tra-%c4%91%e1%ba%a7u-v%c3%a0o aria-label="Tạo hàm real_main() và kiểm tra đầu vào">Tạo hàm real_main() và kiểm tra đầu vào</a></li><li><a href=#b%e1%ba%aft-%c4%91%e1%ba%a7u-x%e1%bb%ad-l%c3%bd-file aria-label="Bắt đầu xử lý file">Bắt đầu xử lý file</a></li><li><a href=#k%e1%ba%bft aria-label=Kết>Kết</a></li></ul></div></details></div><div class=post-content><hr><p>Qua các bài viết về concept cơ bản trong Rust trước đó. Hôm nay mình sẽ làm 1 tool giải nén file zip bằng thư viện <code>zip</code> trong Rust.</p><p>Cách sử dụng tool này khá đơn giản, chỉ cần nhập dòng lệnh sau</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cargo run &lt;file_name&gt;
</span></span></code></pre></div><p>Ok, bắt đầu thôi nào.</p><h2 id=tạo-project-với-cargo>Tạo project với Cargo<a hidden class=anchor aria-hidden=true href=#tạo-project-với-cargo>#</a></h2><p>Sử dụng <code>cargo new</code> để tạo 1 project mới</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cargo new extract-zip-file
</span></span></code></pre></div><p>Mình sẽ có cấu trúc thư mục cơ bản như sau:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>extract-zip-file/
</span></span><span style=display:flex><span>├── Cargo.toml
</span></span><span style=display:flex><span>├── Cargo.lock
</span></span><span style=display:flex><span>└── src
</span></span><span style=display:flex><span>    └── main.rs
</span></span></code></pre></div><p>Trước hết mình sẽ install thư viện <code>zip</code> vào bên trong project.</p><p>Vào bên trong file Cargo.toml, thêm thư viện như sau:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rs data-lang=rs><span style=display:flex><span>[package]
</span></span><span style=display:flex><span><span style=color:#6272a4>//...
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>
</span></span><span style=display:flex><span>[dependencies]
</span></span><span style=display:flex><span>zip <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;0.6.4&#34;</span>
</span></span></code></pre></div><p>Ngay sau khi thêm đoạn <code>zip=...</code> vào phần dependencies, project sẽ tự động install thư viện zip về.</p><h2 id=bắt-đầu-dòng-code-đầu-tiên>Bắt đầu dòng code đầu tiên<a hidden class=anchor aria-hidden=true href=#bắt-đầu-dòng-code-đầu-tiên>#</a></h2><p>Đầu tiên, mình sẽ đi vào src/main.rs để khai báo thư viện</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rs data-lang=rs><span style=display:flex><span><span style=color:#ff79c6>use</span> std::fs;
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> std::io;
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> std::path::Path;
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> zip::ZipArchive;
</span></span></code></pre></div><p>Như ở trên, mình sử dụng 4 thư viện ghi/đọc dữ liệu từ file và phục vụ việc tạo ra những file mới sau khi extract thành công.</p><p>Kế tiếp, tại hàm <code>main</code> mình sẽ kiểm tra đầu vào của file</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rs data-lang=rs><span style=display:flex><span><span style=color:#ff79c6>fn</span> <span style=color:#50fa7b>main</span>() {
</span></span><span style=display:flex><span>  std::process::exit(real_main());
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Tất nhiên, dòng code ở trên vẫn chưa chạy được vì mình chưa khởi tạo hàm <code>real_main()</code>. Sau đây mình sẽ khởi tạo hàm <code>real_main()</code> và thực hiện lệnh thao tác extract zip file.</p><h2 id=tạo-hàm-real_main-và-kiểm-tra-đầu-vào>Tạo hàm real_main() và kiểm tra đầu vào<a hidden class=anchor aria-hidden=true href=#tạo-hàm-real_main-và-kiểm-tra-đầu-vào>#</a></h2><p>Bên dưới hàm <code>main</code>, mình tạo 1 hàm <code>real_main</code> để xử lý dữ liệu đầu vào</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rs data-lang=rs><span style=display:flex><span><span style=color:#ff79c6>fn</span> <span style=color:#50fa7b>real_main</span>() -&gt; <span style=color:#8be9fd>i32</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Ở đây mình khai báo <code>fn real_main() -> i32</code> là do mình muốn hàm này sẽ trả về 0 hoặc 1. Vì tại hàm <code>main</code>, dòng lệnh <code>std::process::exit()</code> chỉ chạy khi đầu vào là 1 hoặc 0 tương đương với 0 là đầu vào hợp lệ và bắt đầu xử lý, nếu trả về 1, tức đầu vào không hợp lệ, và sẽ exit khỏi chương trình.</p><p>Như đã nói ở trên, mình phải kiểm tra đầu vào có hợp lệ hay không.</p><p>Trước khi kiểm tra mình cần phân tích một chút về đầu vào. Câu lệnh để thực thi của mình là</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cargo run &lt;file_name&gt;
</span></span></code></pre></div><p>Tại đây, <code>cargo run</code> là lệnh thực thi project của Rust với <code>run</code> là đối số đầu tiên, và <code>&lt;file_name></code> là đối số thứ 2. Công việc kiểm tra của mình là phải check xem đầu vào có thực sự đúng với yêu cầu hay không.</p><p>Bước đầu kiểm tra, mình sẽ tạo 1 biến <code>args</code> là collection bằng <code>Vec</code>, không định dạng kiểu dữ liệu bằng <code>_</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rs data-lang=rs><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>let</span> args: <span style=color:#8be9fd;font-style:italic>Vec</span><span style=color:#ff79c6>&lt;</span>_<span style=color:#ff79c6>&gt;</span> <span style=color:#ff79c6>=</span> std::env::args().collect();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>if</span> args.len() <span style=color:#ff79c6>&lt;</span> <span style=color:#bd93f9>2</span> {
</span></span><span style=display:flex><span>  println!(<span style=color:#f1fa8c>&#34;Usage: </span><span style=color:#f1fa8c>{}</span><span style=color:#f1fa8c> &lt;filename&gt;&#34;</span>, args[<span style=color:#bd93f9>0</span>]);
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>return</span> <span style=color:#bd93f9>1</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Lệnh <code>if args.len() &lt; 2</code> để kiểm tra xem đầu vào dữ liệu có chứa file zip hay không. Nếu câu lệnh thực thi không đúng với điều kiện mong muốn để thực thi thì chương trình sẽ chạy lệnh <code>println!("Usage: {} &lt;filename>", args[0])</code> để hướng dẫn người dùng nhập đúng điều kiện và sau đó trả về 1, tức là chạy lệnh <code>exit</code> tại hàm <code>main</code>, và thoát chương trình.</p><p>Trong trường hợp điều kiện đã đúng, mình sẽ tạo 1 đường dẫn cho file được giải nén và ghi dữ liệu vào bên trong file với thư viện Path và fs</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rs data-lang=rs><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>let</span> fname <span style=color:#ff79c6>=</span> Path::new(<span style=color:#ff79c6>&amp;*</span>args[<span style=color:#bd93f9>1</span>]);
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>let</span> file <span style=color:#ff79c6>=</span> fs::File::open(<span style=color:#ff79c6>&amp;</span>fname).unwrap();
</span></span></code></pre></div><p>Đoạn code trên sau khi mình mở file bằng <code>fs::File::open()</code> thì nó trả về 1 đối tượng <code>Result&lt;fs::File, std::io::Error></code> đại diện cho việc mở file thành công hoặc thất bại. Mình sử dụng phương thức <code>.unwrap()</code> để xử lý kết quả đấy, trong trường hợp mở file thất bại chương trình sẽ <code>panic!()</code> lỗi và dừng chương trình, ngược lại, sẽ tạo ra file và gán nó cho biến <code>file</code> sẵn sàng cho việc đọc/ghi dữ liệu.</p><h2 id=bắt-đầu-xử-lý-file>Bắt đầu xử lý file<a hidden class=anchor aria-hidden=true href=#bắt-đầu-xử-lý-file>#</a></h2><p>Qua công đoạn kiểm tra, mình sẽ bắt đầu giải nén file với phương thức <code>ZipArchive</code> thông qua thư viện <code>zip</code>.</p><p>Mình sẽ khai báo 1 biến <code>archive</code> là mutable để chứa các file cần giải nén và tiện cho việc sửa đổi file.</p><p>*<em>Có thể tìm hiểu thêm về mutable và immutable nếu không hiểu.</em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rs data-lang=rs><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#ff79c6>mut</span> archive <span style=color:#ff79c6>=</span> ZipArchive::new(file).unwrap();
</span></span></code></pre></div><p>Cú pháp <code>ZipArchive::new(file)</code> giúp mình mở file nén và đọc các dữ liệu bên trong.</p><p>Kế tiếp, mình sẽ sử dụng vòng lặp (for loop) để đọc các file bên trong.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rs data-lang=rs><span style=display:flex><span><span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> <span style=color:#bd93f9>0</span><span style=color:#ff79c6>..</span>archive.len() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Tại đây, mình sẽ cho vòng lặp chạy qua các phần tử (các file/folder bên trong file .zip) bắt đầu từ index = 0.</p><p>Bên trong vòng lặp, mình sẽ kiểm tra file có rỗng hay không, và gán nó vào 1 biến <code>outpath</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rs data-lang=rs><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#ff79c6>mut</span> file <span style=color:#ff79c6>=</span> archive.by_index(i).unwrap();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>let</span> outpath <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>match</span> file.enclosed_name() {
</span></span><span style=display:flex><span>  <span style=color:#8be9fd;font-style:italic>Some</span>(path) <span style=color:#ff79c6>=&gt;</span> path.to_owned(),
</span></span><span style=display:flex><span>  <span style=color:#8be9fd;font-style:italic>None</span> <span style=color:#ff79c6>=&gt;</span> <span style=color:#ff79c6>continue</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Biến <code>archive</code> hỗ trợ phương thức <code>.by_index(i)</code> để truy cập vào bên trong file tại vị trí <code>i</code>, nó sẽ trả về <code>Result&lt;ZipFile, ZipError></code> trong đó ZipFile là thể hiện cho file bên trong biến <code>archive</code>.</p><p>Sau đó mình tạo file <code>outpath</code> bằng cú pháp <code>match</code> và phương thức <code>enclosed_name()</code> để check file có rỗng hay không. Trường hợp file <strong>không</strong> rỗng mình sẽ dùng phương thức <code>.to_owned()</code> để tạo 1 bản sao của biến path và gán vào biến <code>outpath</code>. Ngược lại, nó sẽ đi đến file tiếp theo.</p><p>Tiếp theo, mình kiểm tra xem file nén có ghi chú nào hay không, nếu có mình sẽ hiển thị ra màn hình. Vì trường hợp ghi chú này tuỳ vào mục đích của tác giả, nên đôi khi sẽ không có, mình sẽ handle nó bên trong 1 block code cụ thể.</p><p>*<em>Có thể tìm hiểu về scope nếu không hiểu.</em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rs data-lang=rs><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#8be9fd;font-style:italic>let</span> comment <span style=color:#ff79c6>=</span> file.comment();
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>if</span> <span style=color:#ff79c6>!</span>comment.is_empty() {
</span></span><span style=display:flex><span>    println!(<span style=color:#f1fa8c>&#34;File </span><span style=color:#f1fa8c>{}</span><span style=color:#f1fa8c> comment: </span><span style=color:#f1fa8c>{}</span><span style=color:#f1fa8c>&#34;</span>, i, comment);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Cuối cùng, mình sẽ xử lý ghi dữ liệu từ file nén ra 1 file mới.</p><p>Khi giải nén, sẽ có 1 số trường hợp bên trong file <code>.zip</code> là file hoặc folder. Mình sẽ kiểm tra phần tử đấy có phải là folder hay không bằng cách sử dụng phương thức <code>.ends_with("/")</code> vì các folder thường sẽ được khai báo như <code>extra/out.txt</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rs data-lang=rs><span style=display:flex><span><span style=color:#ff79c6>if</span> (<span style=color:#ff79c6>*</span>file.name()).ends_with(<span style=color:#f1fa8c>&#39;/&#39;</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Vì biến <code>outpath</code> hiện tại mình đang mong muốn đầu ra là file, nên nếu là folder, thì mình cần phải tạo 1 thư mục cha của <code>outpath</code> để chứa các file bên trong. Bên trong if mình sẽ sử dụng phương thức <code>.create_dir_all()</code> để tạo thư mục cha cho <code>outpath</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rs data-lang=rs><span style=display:flex><span>println!(<span style=color:#f1fa8c>&#34;File </span><span style=color:#f1fa8c>{}</span><span style=color:#f1fa8c> extracted to </span><span style=color:#f1fa8c>\&#34;</span><span style=color:#f1fa8c>{}</span><span style=color:#f1fa8c>\&#34;</span><span style=color:#f1fa8c>&#34;</span>, i, outpath.display());
</span></span><span style=display:flex><span>fs::create_dir_all(<span style=color:#ff79c6>&amp;</span>outpath).unwrap();
</span></span></code></pre></div><p>Ngược lại, nếu phần tử là 1 file, thì mình sẽ đọc dữ liệu tại file nén và ghi vào 1 biến mới <code>outfile</code> cùng với tên file và đường dẫn đã được chỉ định trước đó.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rs data-lang=rs><span style=display:flex><span>println!(<span style=color:#f1fa8c>&#34;File </span><span style=color:#f1fa8c>{}</span><span style=color:#f1fa8c> extracted to </span><span style=color:#f1fa8c>\&#34;</span><span style=color:#f1fa8c>{}</span><span style=color:#f1fa8c>\&#34;</span><span style=color:#f1fa8c> (</span><span style=color:#f1fa8c>{}</span><span style=color:#f1fa8c> bytes)&#34;</span>, i, outpath.display(), file.size());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>if</span> <span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#8be9fd;font-style:italic>Some</span>(p) <span style=color:#ff79c6>=</span> outpath.parent() {
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>if</span> <span style=color:#ff79c6>!</span>p.exists() {
</span></span><span style=display:flex><span>    fs::create_dir_all(<span style=color:#ff79c6>&amp;</span>p).unwrap();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#ff79c6>mut</span> outfile <span style=color:#ff79c6>=</span> fs::File::create(<span style=color:#ff79c6>&amp;</span>outpath).unwrap();
</span></span><span style=display:flex><span>io::copy(<span style=color:#ff79c6>&amp;</span><span style=color:#ff79c6>mut</span> file, <span style=color:#ff79c6>&amp;</span><span style=color:#ff79c6>mut</span> outfile).unwrap();
</span></span></code></pre></div><p>Sau khi mình hiển thị dữ liệu được nén ra ngoài màn hình với <code>println!()</code> mình kiểm tra xem folder cha của <code>outpath</code> có tồn tại hay không. nếu nó không tồn tại, mình sẽ tạo 1 folder mới bằng <code>create_dir_all()</code></p><p>Kế tiếp, mình tạo 1 biến <code>outfile</code> với đường dẫn và tên file được chỉ định bằng biến <code>outpath</code> trước đó.</p><p>Cuối cùng, mình sử dụng phương thức <code>copy()</code> để ghi dữ liệu từ <code>file</code> nén sang <code>outfile</code>. Cả 2 trường hợp mình đều sử dụng <code>unwrap()</code> để handle khi việc tạo và đọc file sang outfile xảy ra lỗi thì chương trình sẽ <code>panic!()</code> lỗi và dừng chương trình.</p><p>Khi kết thúc vòng for, mình trả về giá trị 0 để thể hiện việc project được thực thi tại hàm <code>main</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rs data-lang=rs><span style=display:flex><span><span style=color:#ff79c6>fn</span> <span style=color:#50fa7b>real_main</span>() -&gt; <span style=color:#8be9fd>i32</span> {
</span></span><span style=display:flex><span>  <span style=color:#6272a4>//do extracted file
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>  <span style=color:#bd93f9>0</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=kết>Kết<a hidden class=anchor aria-hidden=true href=#kết>#</a></h2><p>Như vậy, là mình đã tạo ra được 1 dự án có thể giải nén file .zip bằng thư viện <code>zip</code> của Rust rồi. Cùng xem lại kết quả <a href=https://github.com/phunlh2001/Extract-Zip-File>tại đây</a>.</p><hr><blockquote><p><a href=https://github.com/phunlh2001>Kaiz</a></p></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=/tags/rust/>Rust</a></li></ul><nav class=paginav><a class=next href=/blog/rust/0x04/><span class=title>Trang tiếp theo »</span><br><span>0x04 - Functions</span></a></nav><br><div class=giscus></div><script src=https://giscus.app/client.js data-repo=CodeChoVui/CodeChoVui.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkzNzMxMTU0MDE=" data-category=General data-category-id=DIC_kwDOFj1KCc4CVLRE data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=dark_dimmed data-lang=en crossorigin=anonymous async></script><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share 0x05 - Create An Extract-Zip-File Project on twitter" href="https://twitter.com/intent/tweet/?text=0x05%20-%20Create%20An%20Extract-Zip-File%20Project&amp;url=%2fblog%2frust%2f0x05%2f&amp;hashtags=Rust"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 0x05 - Create An Extract-Zip-File Project on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fblog%2frust%2f0x05%2f&amp;title=0x05%20-%20Create%20An%20Extract-Zip-File%20Project&amp;summary=0x05%20-%20Create%20An%20Extract-Zip-File%20Project&amp;source=%2fblog%2frust%2f0x05%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 0x05 - Create An Extract-Zip-File Project on reddit" href="https://reddit.com/submit?url=%2fblog%2frust%2f0x05%2f&title=0x05%20-%20Create%20An%20Extract-Zip-File%20Project"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 0x05 - Create An Extract-Zip-File Project on facebook" href="https://facebook.com/sharer/sharer.php?u=%2fblog%2frust%2f0x05%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 0x05 - Create An Extract-Zip-File Project on whatsapp" href="https://api.whatsapp.com/send?text=0x05%20-%20Create%20An%20Extract-Zip-File%20Project%20-%20%2fblog%2frust%2f0x05%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 0x05 - Create An Extract-Zip-File Project on telegram" href="https://telegram.me/share/url?text=0x05%20-%20Create%20An%20Extract-Zip-File%20Project&amp;url=%2fblog%2frust%2f0x05%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href>Code Cho Vui</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="Sao chép";function s(){t.innerText="Đã sao chép!",setTimeout(()=>{t.innerText="Sao chép"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>